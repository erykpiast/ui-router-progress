angular.module("ui-router-progress.event-emitter",[]).factory("EventEmitter",function(){function a(){this._eventsHandlers={}}return angular.extend(a.prototype,{on:function(a,b){if(!angular.isString(a))throw new Error("event name must be a string");if(!angular.isFunction(b))throw new Error("event handler must be a function");var c=this._eventsHandlers[a]||(this._eventsHandlers[a]=[]);c.push(b);var d=!1;return function(){if(!d)for(var a=0,e=c.length;e>a;a++)if(c[a]===b){c.splice(a,1),d=!0;break}}},emit:function(a){if(!angular.isString(a))throw new Error("event name must be a string");var b=this._eventsHandlers[a];if(b){var c,d,e,f=[{name:a,defaultPrevented:!1,stopPropagation:function(){c=!0},preventDefault:function(){this.defaultPrevented=!0}}];for(e=1,d=arguments.length;d>e;e++)f.push(arguments[e]);for(e=0,d=b.length;d>e&&(b[e].apply(null,f),!c);e++);}}}),a}),angular.module("ui-router-progress",["ui-router-progress.state-progress-monitor","ui-router-progress.state-progress-indicator"]),angular.module("ui-router-progress.state-progress-indicator",["ui-router-progress.state-progress-monitor"]).directive("uiStateProgressIndicator",["stateProgressMonitor",function(a){return{restrict:"A",link:function(b,c){c.addClass("ui-state-progress-indicator");var d=a.on("show",function(){c.addClass("is-loading")}),e=a.on("hide",function(){c.removeClass("is-loading")});b.$on("destroy",function(){d(),e()})}}}]),angular.module("ui-router-progress.state-progress-monitor",["ui-router-progress.event-emitter"]).provider("stateProgressMonitor",function(){function a(a){if(angular.isDefined(a)){if(angular.isString(a))return void b.push(a);if(angular.isString(a.name))return void b.push(a.name)}throw new Error("argument have to be state object or state name")}var b=[];return{$get:["$rootScope","EventEmitter",function(a,c){function d(a,c){-1!==b.indexOf(c.name)&&f.emit("show")}function e(){f.emit("hide")}var f=new c;return a.$on("$stateChangeStart",d),a.$on("$stateChangeSuccess",e),a.$on("$stateChangeError",e),a.$on("$stateNotFound",e),{on:f.on.bind(f)}}],watch:a}});